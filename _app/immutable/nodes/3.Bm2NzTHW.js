import{a as La,b as Ka}from"../chunks/BlEMXTOu.js";import{H as Ga,a as Ta,g as Ba}from"../chunks/2_JGhpAE.js";import"../chunks/DsnmJJEf.js";import{i as ta,aR as ha,J as Zt,a8 as Ha,aS as Ra,o as Ja,aT as Qa,aU as $a,W as tl,H as el,w as Ua,a9 as Ia,aV as al,aW as ll,ah as x,g as r,aD as sl,ag as oe,aX as Ft,p as mt,at as Te,a as St,b as C,c as _t,f as M,d as l,r as e,t as et,s as a,as as Z,au as gt,e as D,aw as Dt,u as pa,aY as Pe,aZ as Je,av as Sa,a_ as ga,a$ as Na,b0 as rl}from"../chunks/B_q4GCYp.js";import{s as E,e as Ct,g as ya,h as at,j as ea,k as nl,l as ol,m as cl,n as il,o as xa,P as Qe,q as ja,t as $e,u as re,w as vl,x as dl,y as ul,z as fl,A as fa,B as bl,C as za,r as ml,f as De,D as ba,F as rt,G as _l,H as Aa,I as gl,J as yl,K as hl,L as pl}from"../chunks/Qw0ikDj9.js";import{p as Nt,i as ne,b as aa}from"../chunks/CnZFIe9h.js";import{s as xl}from"../chunks/IsdS-L-O.js";import{p as Ca}from"../chunks/BVtjsROz.js";import{a as kl,o as wl}from"../chunks/CyescMlY.js";import{i as Dl}from"../chunks/CokyYHyi.js";function Xa(s){var t,o,n="";if(typeof s=="string"||typeof s=="number")n+=s;else if(typeof s=="object")if(Array.isArray(s)){var v=s.length;for(t=0;t<v;t++)s[t]&&(o=Xa(s[t]))&&(n&&(n+=" "),n+=o)}else for(o in s)s[o]&&(n&&(n+=" "),n+=o);return n}function Ll(){for(var s,t,o=0,n="",v=arguments.length;o<v;o++)(s=arguments[o])&&(t=Xa(s))&&(n&&(n+=" "),n+=t);return n}function Oa(s){return typeof s=="object"?Ll(s):s??""}const Pa=[...` 	
\r\fÂ \v\uFEFF`];function Sl(s,t,o){var n=s==null?"":""+s;if(t&&(n=n?n+" "+t:t),o){for(var v in o)if(o[v])n=n?n+" "+v:v;else if(n.length)for(var c=v.length,d=0;(d=n.indexOf(v,d))>=0;){var i=d+c;(d===0||Pa.includes(n[d-1]))&&(i===n.length||Pa.includes(n[i]))?n=(d===0?"":n.substring(0,d))+n.substring(i+1):d=i}}return n===""?null:n}function pt(s,t,o,n,v,c){var d=s.__className;if(ta||d!==o||d===void 0){var i=Sl(o,n,c);(!ta||i!==s.getAttribute("class"))&&(i==null?s.removeAttribute("class"):s.className=i),s.__className=o}else if(c&&v!==c)for(var u in c){var k=!!c[u];(v==null||k!==!!v[u])&&s.classList.toggle(u,k)}return c}function Wa(s,t,o=!1){if(s.multiple){if(t==null)return;if(!Ja(t))return Qa();for(var n of s.options)n.selected=t.includes(Me(n));return}for(n of s.options){var v=Me(n);if($a(v,t)){n.selected=!0;return}}(!o||t!==void 0)&&(s.selectedIndex=-1)}function Nl(s){var t=new MutationObserver(()=>{Wa(s,s.__value)});t.observe(s,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),tl(()=>{t.disconnect()})}function Fa(s,t,o=t){var n=new WeakSet,v=!0;ha(s,"change",c=>{var d=c?"[selected]":":checked",i;if(s.multiple)i=[].map.call(s.querySelectorAll(d),Me);else{var u=s.querySelector(d)??s.querySelector("option:not([disabled])");i=u&&Me(u)}o(i),Zt!==null&&n.add(Zt)}),Ha(()=>{var c=t();if(s===document.activeElement){var d=Ra??Zt;if(n.has(d))return}if(Wa(s,c,v),v&&c===void 0){var i=s.querySelector(":checked");i!==null&&(c=Me(i),o(c))}s.__value=c,v=!1}),Nl(s)}function Me(s){return"__value"in s?s.__value:s.value}function Le(s,t,o=t){var n=new WeakSet;ha(s,"input",async v=>{var c=v?s.defaultValue:s.value;if(c=ma(s)?_a(c):c,o(c),Zt!==null&&n.add(Zt),await el(),c!==(c=t())){var d=s.selectionStart,i=s.selectionEnd,u=s.value.length;if(s.value=c??"",i!==null){var k=s.value.length;d===i&&i===u&&k>u?(s.selectionStart=k,s.selectionEnd=k):(s.selectionStart=d,s.selectionEnd=Math.min(i,k))}}}),(ta&&s.defaultValue!==s.value||Ua(t)==null&&s.value)&&(o(ma(s)?_a(s.value):s.value),Zt!==null&&n.add(Zt)),Ia(()=>{var v=t();if(s===document.activeElement){var c=Ra??Zt;if(n.has(c))return}ma(s)&&v===_a(s.value)||s.type==="date"&&!v&&!s.value||v!==s.value&&(s.value=v??"")})}function Lt(s,t,o=t){ha(s,"change",n=>{var v=n?s.defaultChecked:s.checked;o(v)}),(ta&&s.defaultChecked!==s.checked||Ua(t)==null)&&o(s.checked),Ia(()=>{var n=t();s.checked=!!n})}function ma(s){var t=s.type;return t==="number"||t==="range"}function _a(s){return s===""?null:+s}function jl(s,t){al(window,["resize"],()=>ll(()=>t(window[s])))}function zl(s){var t=sl(0);return function(){return arguments.length===1?(x(t,r(t)+1),arguments[0]):(r(t),s())}}function Al(s,t){throw new Ga(s,t)}function Cl({params:s}){const t=s.design;if(Object.keys(La).includes(t))return{pageDef:La[t],allLink:Ka};Al(404,"Design undefined!")}const Xs=Object.freeze(Object.defineProperty({__proto__:null,load:Cl},Symbol.toStringTag,{value:"Module"})),G=oe({});function Ya(s,t,o){if(Object.keys(G).includes(s)){const v=G[s],c=Object.keys(v);for(const d of Object.keys(t))c.includes(d)?o&&(v[d]=t[d]):v[d]=t[d];G[s]=v}else G[s]=t}function Ol(s){const t=s.pDef.partName,o={};for(const n of s.pDef.params)o[n.name]=n.init;Ya(t,o,!1)}var Pl=M('<aside class="backdrop svelte-18nkskx"><div class="dialog svelte-18nkskx"><button class="svelte-18nkskx"><img/></button></div></aside>');function qa(s,t){mt(t,!0);let o=Nt(t,"modalOpen",15);function n(){o(!1)}var v=Te(),c=St(v);{var d=i=>{var u=Pl(),k=l(u),b=l(k);b.__click=n;var L=l(b);e(b),e(k),e(u),et(()=>{E(L,"src",t.svgPath),E(L,"alt",t.svgPath)}),C(i,u)};ne(c,i=>{o()&&i(d)})}C(s,v),_t()}Ft(["click"]);var Fl=M('<button class="svelte-8c1khv"><img class="svelte-8c1khv"/></button>'),Ml=M('<section class="svelte-8c1khv"><!> <!></section>');function Tl(s,t){mt(t,!0);function o(b){const L=[];for(const z of Object.values(b.paramSvg))L.includes(z)||L.push(z);return L}let n=Z(!1),v=Z(""),c=gt(()=>o(t.pDef).map(b=>ya(`/pgdsvg/${b}`)));function d(b){x(v,b,!0),x(n,!0)}var i=Ml(),u=l(i);qa(u,{get svgPath(){return r(v)},get modalOpen(){return r(n)},set modalOpen(b){x(n,b,!0)}});var k=a(u,2);Ct(k,16,()=>r(c),b=>b,(b,L)=>{var z=Fl();z.__click=()=>d(L);var h=l(z);e(z),et(()=>{E(h,"src",L),E(h,"alt",L)}),C(b,z)}),e(i),C(s,i),_t()}Ft(["click"]);var Rl=M('<aside class="backdrop svelte-17jrwg3"><div><article class="question svelte-17jrwg3"><!></article> <footer class="svelte-17jrwg3"><button class="cancel svelte-17jrwg3">Cancel</button> <button class="ok svelte-17jrwg3"> </button></footer></div></aside>');function Fe(s,t){mt(t,!0);let o=Nt(t,"okName",3,"Ok"),n=Nt(t,"modalOpen",15),v=Nt(t,"sizeLarge",3,!1);function c(){n(!1)}function d(){t.okFunc(),n(!1)}var i=Te(),u=St(i);{var k=b=>{var L=Rl(),z=l(L);let h;var f=l(z),R=l(f);xl(R,()=>t.children),e(f);var T=a(f,2),J=l(T);J.__click=c;var A=a(J,2);A.__click=d;var B=l(A,!0);e(A),e(T),e(z),e(L),et(()=>{h=pt(z,1,"dialog svelte-17jrwg3",null,h,{sizeLarge:v()}),D(B,o())}),C(b,L)};ne(u,b=>{n()&&b(k)})}C(s,i),_t()}Ft(["click"]);var Ul=M('<p class="diagItem svelte-1lc1c9p"> </p>'),Il=M('<p class="diagTitle svelte-1lc1c9p">Do you really want to delete the following localStorage keys?</p> <!>',1),Xl=M('<tr class="svelte-1lc1c9p"><td><input type="checkbox"/></td><td class="svelte-1lc1c9p"><button class="svelte-1lc1c9p"> </button></td><td> </td></tr>'),Wl=M('<div class="deleteKeys svelte-1lc1c9p"><button class="svelte-1lc1c9p">Delete</button> <!> <table class="svelte-1lc1c9p"><thead class="svelte-1lc1c9p"><tr><td>Delete</td><td>Key name</td><td>Last modification</td></tr><tr><td><input type="checkbox"/></td><td class="instruction">delete all</td><td></td></tr></thead><tbody class="svelte-1lc1c9p"></tbody></table></div>');function Ea(s,t){mt(t,!0);let o=Nt(t,"storeName",15),n=Nt(t,"localKeys",15),v=Z(oe({})),c=Z(!1),d=Z(!1);function i(){let m=[];const U=new RegExp(`^${t.pageName}_`);return m=Object.keys(window.localStorage).filter(q=>U.test(q)).map(q=>q.replace(U,"")),m.sort(),m}n(i());function u(m){o(m)}function k(m){let U={};for(const V of m){let q="";const Q=`${t.pageName}_${V}`,H=window.localStorage.getItem(Q);H!==null&&(q=JSON.parse(H).lastModif),U[V]=q}return U}let b=gt(()=>k(n()));function L(m){let U={};for(const V of m)U[V]=!1;return U}x(v,L(n()),!0);function z(){for(const m of n())r(v)[m]=r(c)}function h(){for(const m of n())if(r(v)[m]){const U=`${t.pageName}_${m}`;window.localStorage.removeItem(U)}x(c,!1),n(i())}var f=Wl(),R=l(f);R.__click=()=>{x(d,!0)};var T=a(R,2);Fe(T,{okName:"Confirm",okFunc:h,get modalOpen(){return r(d)},set modalOpen(m){x(d,m,!0)},children:(m,U)=>{var V=Il(),q=a(St(V),2);Ct(q,16,n,Q=>Q,(Q,H)=>{var lt=Te(),it=St(lt);{var K=dt=>{var vt=Ul(),ft=l(vt,!0);e(vt),et(()=>D(ft,H)),C(dt,vt)};ne(it,dt=>{r(v)[H]&&dt(K)})}C(Q,lt)}),C(m,V)},$$slots:{default:!0}});var J=a(T,2),A=l(J),B=a(l(A)),nt=l(B),ot=l(nt);at(ot),ot.__change=z,e(nt),Dt(2),e(B),e(A);var ct=a(A);Ct(ct,20,n,m=>m,(m,U)=>{var V=Xl(),q=l(V),Q=l(q);at(Q),e(q);var H=a(q),lt=l(H);lt.__click=()=>u(U);var it=l(lt,!0);e(lt),e(H);var K=a(H),dt=l(K,!0);e(K),e(V),et(()=>{D(it,U),D(dt,r(b)[U])}),Lt(Q,()=>r(v)[U],vt=>r(v)[U]=vt),C(m,V)}),e(ct),e(J),e(f),Lt(ot,()=>r(c),m=>x(c,m)),C(s,f),_t()}Ft(["click","change"]);var Yl=M('<p class="warnMsg svelte-rptx4s"> </p>'),ql=M('<!> <div class="svelte-rptx4s"><label for="storName" class="svelte-rptx4s">Give a name to your parameter-set:</label> <input type="text" id="storName" required minlength="4" maxlength="30" size="32" class="svelte-rptx4s"/> <!></div>',1);function El(s,t){mt(t,!0);let o=Nt(t,"storeName",15),n=Z(oe([]));function v(z){const h=/[-:]/g,f=/\..*$/,R=new Date().toISOString().replace(h,"").replace(f,"").replace("T","_");return`${z}_${R}`}o(v(t.pageName));let c=gt(()=>r(n).includes(o()));var d=ql(),i=St(d);Ea(i,{get pageName(){return t.pageName},get storeName(){return o()},set storeName(z){o(z)},get localKeys(){return r(n)},set localKeys(z){x(n,z,!0)}});var u=a(i,2),k=a(l(u),2);at(k);var b=a(k,2);{var L=z=>{var h=Yl(),f=l(h);e(h),et(()=>D(f,`Warning: name ${o()??""} already used`)),C(z,h)};ne(b,z=>{r(c)&&z(L)})}e(u),Le(k,o),C(s,d),_t()}var Vl=M('<!> <div class="svelte-ughbal"><label for="storName" class="svelte-ughbal">Select a parameter-set:</label> <input type="text" id="storName" readonly="" minlength="4" maxlength="30" size="32" class="svelte-ughbal"/></div>',1);function Zl(s,t){mt(t,!0);let o=Nt(t,"storeName",15),n=Z(oe([]));function v(k){let b=o();return!k.includes(b)&&(k.length>0?b=k[0]:b=""),b}pa(()=>{o(v(r(n)))});var c=Vl(),d=St(c);Ea(d,{get pageName(){return t.pageName},get storeName(){return o()},set storeName(k){o(k)},get localKeys(){return r(n)},set localKeys(k){x(n,k,!0)}});var i=a(d,2),u=a(l(i),2);at(u),e(i),et(()=>ea(u,o())),C(s,c),_t()}const w=oe({dLayers:ol(),zAdjust:nl(),canvasZWidth:0});var Kl=M('<canvas class="mini svelte-1rwizl"></canvas>');function Ma(s,t){mt(t,!0);const o=200,n=.6;let v;function c(u,k,b,L){const z=cl(L);z.ruler=!1;let h;if(v){const f=v.getContext("2d");f.clearRect(0,0,f.canvas.width,f.canvas.height);const R=f.canvas.width;try{t.full?h=u.getAdjustFull(f.canvas.width,f.canvas.height):h=il(b,R,k),u.draw(f,h,z)}catch(T){console.log(T)}}}pa(()=>{c(t.pFig,w.zAdjust,w.canvasZWidth,w.dLayers)});function d(u){const k=u.offsetX,b=u.offsetY,L=v.getContext("2d"),z=L.canvas.width/2,h=L.canvas.height/2;if(u.button===0){let f=1;k>z&&(f+=1*n),b>h&&(f+=2*n),L.canvas.width=f*o,L.canvas.height=f*o,c(t.pFig,w.zAdjust,w.canvasZWidth,w.dLayers)}}var i=Kl();E(i,"width",o),E(i,"height",o),i.__click=d,aa(i,u=>v=u,()=>v),C(s,i),_t()}Ft(["click"]);function Gl(s,t){const o=document.createElement("a");o.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(t)),o.setAttribute("download",s),o.click(),o.remove()}function Bl(s,t,o){const n=/[-:]/g,v=/\..*$/,c=new Date().toISOString().replace(n,"").replace(v,"").replace("T","_");return xa(c,s,t,o)}function ka(s,t,o){const n=/[-:]/g,v=/\..*$/,c=new Date().toISOString().replace(n,"").replace(v,"").replace("T","_"),d=`px_${s}_${c}.json`,i=xa(c,s,t,o);Gl(d,i)}function Hl(s,t,o){const n=new URL(s),v=2e3;let c=n.toString().length;for(const d of Object.keys(t)){const i=t[d].toString(),u=2+d.length+i.length;n.searchParams.append(encodeURIComponent(d),encodeURIComponent(i)),c+=u}return c>=v&&console.log(`warn547: generateUrl: strLength ${c} larger than strLengthLimit ${v}`),n.toString()}const Jl=Symbol();class Ql extends URLSearchParams{#t=Z(0);#l=ts();#e=!1;#a(){if(!this.#l||this.#e)return;this.#e=!0;const t=this.toString();this.#l.search=t&&`?${t}`,this.#e=!1}[Jl](t){if(!this.#e){this.#e=!0;for(const o of[...super.keys()])super.delete(o);for(const[o,n]of t)super.append(o,n);Pe(this.#t),this.#e=!1}}append(t,o){super.append(t,o),this.#a(),Pe(this.#t)}delete(t,o){var n=super.has(t,o);super.delete(t,o),n&&(this.#a(),Pe(this.#t))}get(t){return r(this.#t),super.get(t)}getAll(t){return r(this.#t),super.getAll(t)}has(t,o){return r(this.#t),super.has(t,o)}keys(){return r(this.#t),super.keys()}set(t,o){var n=super.getAll(t).join("");super.set(t,o),n!==super.getAll(t).join("")&&(this.#a(),Pe(this.#t))}sort(){super.sort(),this.#a(),Pe(this.#t)}toString(){return r(this.#t),super.toString()}values(){return r(this.#t),super.values()}entries(){return r(this.#t),super.entries()}[Symbol.iterator](){return this.entries()}get size(){return r(this.#t),super.size}}let $l=null;function ts(){return $l}var es=M('<input type="number" class="input-number svelte-f0iror"/> <input type="range" class="svelte-f0iror"/>',1),as=M("<option> </option>"),ls=M("<select></select>"),ss=M("<option> </option>"),rs=M("<select></select>"),ns=M('<tr><td class="svelte-f0iror"> </td><td class="svelte-f0iror"><button class="svelte-f0iror"> </button></td><td class="svelte-f0iror"><!></td><td> </td><td> </td><td class="svelte-f0iror"> </td><td class="svelte-f0iror"> </td><td> </td></tr>'),os=M('<tbody class="svelte-f0iror"><tr class="separator svelte-f0iror"><td class="svelte-f0iror"> </td><td class="svelte-f0iror"> </td><td class="svelte-f0iror"><label class="svelte-f0iror"><input type="checkbox" class="svelte-f0iror"/> <span class="svelte-f0iror"></span></label></td></tr></tbody> <tbody></tbody>',1),cs=M('<p>Copy this URL and send it to your friends!</p> <p class="cUrl svelte-f0iror"> </p>',1),is=M('<section class="svelte-f0iror"><h2 class="svelte-f0iror">Parameters</h2> <main class="svelte-f0iror"><label for="loadFParams" class="fileUpload svelte-f0iror">Load Params from File</label> <input id="loadFParams" type="file" accept="text/plain, application/json" class="svelte-f0iror"/> <button class="svelte-f0iror">Set Params Default</button> <button class="svelte-f0iror">Load Params from localStorage</button> <!> <!> <textarea rows="3" cols="80" readonly="" wrap="soft"></textarea> <table class="svelte-f0iror"><thead class="svelte-f0iror"><tr class="svelte-f0iror"><td class="svelte-f0iror">&#35;</td><td class="svelte-f0iror">Parameter name</td><td class="svelte-f0iror">Value<span class="svelte-f0iror"><button class="svelte-f0iror">&minus;</button><button class="svelte-f0iror">+</button></span></td><td>Unit</td><td>Default</td><td class="svelte-f0iror">Min</td><td class="svelte-f0iror">Max</td><td>Step</td></tr></thead><!></table> <div class="comment svelte-f0iror"><label for="inComment">Comment:</label> <input type="text" id="inComment" maxlength="150"/></div> <button class="svelte-f0iror">Save Parameters to File</button> <button class="svelte-f0iror">Save Parameters as URL</button> <button class="svelte-f0iror">Save Parameters to localStorage</button> <!> <!></main> <!> <button class="side-img svelte-f0iror"><img class="svelte-f0iror"/></button> <div class="mini-canvas svelte-f0iror"><!></div> <div class="mini-canvas svelte-f0iror"><!></div></section>');function vs(s,t){mt(t,!0);let o=Z(""),n=Z(!1),v=Z(""),c=Z(!1),d=Z(!1),i=Z(!1),u=Z(!1),k=Z(!1),b=Z(""),L=Z(""),z=Z(""),h=Z(oe(lt(t.pDef.params[0].name))),f=Z(!1),R=Z(oe(vt(dt(t.pDef.params))));Ta(()=>{x(h,lt(t.pDef.params[0].name),!0),x(R,vt(dt(t.pDef.params)),!0)});function T(g,p){let N="",I=!1;g!==t.pDef.partName&&(N+=`warn361: read partName: '${g}'  expected partName: '${t.pDef.partName}'
`,I=!0);let $=0,st=0,Rt=0;const Yt=[];for(const yt of t.pDef.params)Yt.push(yt.name),Object.hasOwn(p,yt.name)?($+=1,G[t.pDef.partName][yt.name]===p[yt.name]?Rt+=1:G[t.pDef.partName][yt.name]=p[yt.name]):st+=1;let Pt=0;for(const yt of Object.keys(p))Yt.includes(yt)||(Pt+=1,N+=`warn363: parameter ${yt} not in the scope of the design (${Pt})
`);const Ht=Pt>0,Jt=new Date().toLocaleTimeString();return N+=`Params loaded at ${Jt} :`,N+=` def-nb: ${Object.keys(t.pDef.params).length}`,N+=`, cover-nb: ${$}, uncover-nb: ${st}
`,N+=` load-nb: ${Object.keys(p).length}`,N+=`, equal-nb: ${Rt}, changed-nb: ${$-Rt}`,N+=`, out-of-scope: ${Pt}`,[N,I||Ht]}async function J(g){try{const p=await fetch(g);if(!p.ok)throw`err627: error while fetching ${g}`;const N=await p.text(),[I]=ja(N);($=>{var st=Je($,2);x(v,st[0],!0),x(c,st[1],!0)})(T(I.partName,I.pVal)),x(o,I.comment,!0)}catch(p){let N=`err223: error by fetching px file
`;N+=p,x(v,N,!0),x(c,!0)}}async function A(){{const g=new Ql(Ca.url.search),p="pxUrl";if(g.has(p)){const I=g.get(p);g.delete(p),I?await J(I):(x(v,`err123: error by parsing URL-search-params
`),x(c,!0))}const N={};for(const[I,$]of g){const st=Number($);isNaN(st)||(N[I]=st)}Object.keys(N).length>0&&(I=>{var $=Je(I,2);x(v,$[0],!0),x(c,$[1],!0)})(T(t.pDef.partName,N))}}A();function B(g){try{const[p]=ja(g);(N=>{var I=Je(N,2);x(v,I[0],!0),x(c,I[1],!0)})(T(p.partName,p.pVal)),x(o,p.comment,!0)}catch(p){let N=`err723: error by parsing parameter file
`;N+=p,x(v,N,!0),x(c,!0)}}async function nt(g){const p=await g.text();B(p)}function ot(g){if(g.target){const p=g.target.files;p&&nt(p[0])}}function ct(){ka(t.pDef.partName,G[t.pDef.partName],r(o))}function m(){const g={};for(const p of t.pDef.params)g[p.name]=p.init;(p=>{var N=Je(p,2);x(v,N[0],!0),x(c,N[1],!0)})(T(t.pDef.partName,g))}function U(){if(r(b)!==void 0&&r(b)!==""){const g=`${t.pDef.partName}_${r(b)}`;{const p=window.localStorage.getItem(g);p===null?(x(v,`Warn157: localStorage key ${g} is null`),x(c,!0)):B(p)}}else x(v,"Warn239: No valid name for loading from localStorage!"),x(c,!0)}function V(){if(r(L)!==void 0&&r(L)!==""){const g=`${t.pDef.partName}_${r(L)}`,p=/\..*$/,N=new Date().toISOString().replace(p,""),I=xa(N,t.pDef.partName,G[t.pDef.partName],r(o));window.localStorage.setItem(g,I)}else console.log("Warn639: No valid name for writing to localStorage!")}function q(){return Hl(Ca.url.href,G[t.pDef.partName]).toString()}function Q(){x(z,q(),!0),x(u,!0)}function H(){}function lt(g){let p=ya("/pgdsvg/default_param_blank.svg");return Object.keys(t.pDef.paramSvg).includes(g)&&(p=ya(`/pgdsvg/${t.pDef.paramSvg[g]}`)),p}function it(g){x(h,lt(g),!0)}function K(){x(f,!0)}function dt(g){const p=[];let I={sectionName:"main",sectionID:"g0main",sectionVisCollapse:!1,params:[]},$=0;for(const st of g)st.pType===Qe.eSectionSeparator?(p.push(I),$+=1,I={sectionName:st.name,sectionID:`g${$}${st.name}`,sectionVisCollapse:!0,params:[]}):I.params.push(st);return p.push(I),p}function vt(g){const p={};for(const N of g)p[N.sectionID]=N.sectionVisCollapse;return p}let ft=gt(()=>dt(t.pDef.params));function Mt(){x(n,!0)}function _(){x(n,!1)}let S=gt(()=>r(n)?2:4),O=gt(()=>r(n)?2:3),Y=gt(()=>r(n)?50:70);var xt=is(),kt=a(l(xt),2),Ut=a(l(kt),2);Ut.__change=ot;var It=a(Ut,2);It.__click=()=>{x(d,!0)};var Xt=a(It,2);Xt.__click=()=>{x(i,!0)};var Tt=a(Xt,2);Fe(Tt,{okName:"Overwrite Parameters",okFunc:m,get modalOpen(){return r(d)},set modalOpen(g){x(d,g,!0)},children:(g,p)=>{Dt();var N=Sa("Load the default parameters ?");C(g,N)},$$slots:{default:!0}});var Ot=a(Tt,2);Fe(Ot,{okName:"Load Parameters",okFunc:U,get modalOpen(){return r(i)},set modalOpen(g){x(i,g,!0)},children:(g,p)=>{Zl(g,{get pageName(){return t.pDef.partName},get storeName(){return r(b)},set storeName(N){x(b,N,!0)}})},$$slots:{default:!0}});var Wt=a(Ot,2);ga(Wt);let ce;var Se=a(Wt,2),ie=l(Se),Re=l(ie),ve=a(l(Re),2),de=a(l(ve)),ue=l(de);ue.__click=Mt;var la=a(ue);la.__click=_,e(de),e(ve);var fe=a(ve);let Ue;var be=a(fe);let Ie;var Xe=a(be,3);let We;e(Re),e(ie);var Ye=a(ie);Ct(Ye,19,()=>r(ft),g=>g.sectionName,(g,p,N)=>{var I=os(),$=St(I),st=l($),Rt=l(st),Yt=l(Rt,!0);e(Rt);var Pt=a(Rt),Ht=l(Pt,!0);e(Pt);var Jt=a(Pt),pe=l(Jt),yt=l(pe);at(yt),Dt(2),e(pe),e(Jt),e(st),e($);var Qt=a($,2);let xe;Ct(Qt,23,()=>r(p).params,$t=>$t.name,($t,X,oa)=>{var qt=ns();let Ve;var ke=l(qt),ca=l(ke);e(ke);var te=a(ke),ee=l(te);ee.__click=()=>it(r(X).name);var ia=l(ee,!0);e(ee),e(te);var ae=a(te),va=l(ae);{var je=y=>{var F=es(),P=St(F);at(P);var j=a(P,2);at(j),et(()=>{E(P,"min",r(X).min),E(P,"max",r(X).max),E(P,"step",r(X).step),E(j,"min",r(X).min),E(j,"max",r(X).max),E(j,"step",r(X).step)}),Le(P,()=>G[t.pDef.partName][r(X).name],tt=>G[t.pDef.partName][r(X).name]=tt),Le(j,()=>G[t.pDef.partName][r(X).name],tt=>G[t.pDef.partName][r(X).name]=tt),C(y,F)},da=y=>{var F=Te(),P=St(F);{var j=jt=>{var bt=ls();Ct(bt,22,()=>["Off","On"],wt=>wt,(wt,ht,zt)=>{var ut=as(),At=l(ut,!0);e(ut);var Vt={};et(()=>{D(At,ht),Vt!==(Vt=r(zt))&&(ut.value=(ut.__value=r(zt))??"")}),C(wt,ut)}),e(bt),Fa(bt,()=>G[t.pDef.partName][r(X).name],wt=>G[t.pDef.partName][r(X).name]=wt),C(jt,bt)},tt=jt=>{var bt=Te(),wt=St(bt);{var ht=ut=>{var At=rs();Ct(At,22,()=>r(X).dropdown,Vt=>Vt,(Vt,Va,wa)=>{var Oe=ss(),Za=l(Oe,!0);e(Oe);var Da={};et(()=>{D(Za,Va),Da!==(Da=r(wa))&&(Oe.value=(Oe.__value=r(wa))??"")}),C(Vt,Oe)}),e(At),Fa(At,()=>G[t.pDef.partName][r(X).name],Vt=>G[t.pDef.partName][r(X).name]=Vt),C(ut,At)},zt=ut=>{var At=Sa("unknown");C(ut,At)};ne(wt,ut=>{r(X).pType===Qe.eDropdown?ut(ht):ut(zt,!1)},!0)}C(jt,bt)};ne(P,jt=>{r(X).pType===Qe.eCheckbox?jt(j):jt(tt,!1)},!0)}C(y,F)};ne(va,y=>{r(X).pType===Qe.eNumber?y(je):y(da,!1)})}e(ae);var le=a(ae);let Ze;var Ke=l(le,!0);e(le);var Et=a(le);let Ge;var ze=l(Et,!0);e(Et);var Ae=a(Et),Be=l(Ae,!0);e(Ae);var Ce=a(Ae),we=l(Ce,!0);e(Ce);var se=a(Ce);let He;var ua=l(se,!0);e(se),e(qt),et(()=>{Ve=pt(qt,1,"svelte-f0iror",null,Ve,{changed:G[t.pDef.partName][r(X).name]!==r(X).init}),D(ca,`${r(N)+1}.${r(oa)+1}`),D(ia,r(X).name),Ze=pt(le,1,"svelte-f0iror",null,Ze,{hideColumn:r(n)}),D(Ke,r(X).unit),Ge=pt(Et,1,"svelte-f0iror",null,Ge,{hideColumn:r(n)}),D(ze,r(X).init),D(Be,r(X).min),D(we,r(X).max),He=pt(se,1,"svelte-f0iror",null,He,{hideColumn:r(n)}),D(ua,r(X).step)}),C($t,qt)}),e(Qt),et(()=>{D(Yt,r(N)+1),E(Pt,"colspan",r(S)),D(Ht,r(p).sectionName),E(Jt,"colspan",r(O)),xe=pt(Qt,1,"svelte-f0iror",null,xe,{collaps:r(R)[r(p).sectionID]})}),Lt(yt,()=>r(R)[r(p).sectionID],$t=>r(R)[r(p).sectionID]=$t),C(g,I)}),e(Se);var Kt=a(Se,2),Gt=a(l(Kt),2);at(Gt),e(Kt);var qe=a(Kt,2);qe.__click=ct;var me=a(qe,2);me.__click=Q;var Ee=a(me,2);Ee.__click=()=>{x(k,!0)};var _e=a(Ee,2);Fe(_e,{okName:"Done",okFunc:H,sizeLarge:!0,get modalOpen(){return r(u)},set modalOpen(g){x(u,g,!0)},children:(g,p)=>{var N=cs(),I=a(St(N),2),$=l(I,!0);e(I),et(()=>D($,r(z))),C(g,N)},$$slots:{default:!0}});var sa=a(_e,2);Fe(sa,{okName:"Save into localStorage",okFunc:V,get modalOpen(){return r(k)},set modalOpen(g){x(k,g,!0)},children:(g,p)=>{El(g,{get pageName(){return t.pDef.partName},get storeName(){return r(L)},set storeName(N){x(L,N,!0)}})},$$slots:{default:!0}}),e(kt);var Ne=a(kt,2);qa(Ne,{get svgPath(){return r(h)},get modalOpen(){return r(f)},set modalOpen(g){x(f,g,!0)}});var ge=a(Ne,2);ge.__click=K;var ye=l(ge);e(ge);var Bt=a(ge,2),ra=l(Bt);Ma(ra,{get pFig(){return t.pFig},full:!0}),e(Bt);var he=a(Bt,2),na=l(he);Ma(na,{get pFig(){return t.pFig},full:!1}),e(he),e(xt),et(()=>{ea(Wt,r(v)),ce=pt(Wt,1,"svelte-f0iror",null,ce,{colorWarn:r(c)}),Ue=pt(fe,1,"svelte-f0iror",null,Ue,{hideColumn:r(n)}),Ie=pt(be,1,"svelte-f0iror",null,Ie,{hideColumn:r(n)}),We=pt(Xe,1,"svelte-f0iror",null,We,{hideColumn:r(n)}),E(Gt,"size",r(Y)),E(ye,"src",r(h)),E(ye,"alt",r(h))}),Le(Gt,()=>r(o),g=>x(o,g)),C(s,xt),_t()}Ft(["change","click"]);var ds=M('<nav class="svelte-lmol7f"><button class="svelte-lmol7f">0</button> <button class="svelte-lmol7f">&lt-</button> <button class="svelte-lmol7f">|&lt</button> <button class="svelte-lmol7f">||</button> <button class="svelte-lmol7f">&gt|</button> <button class="svelte-lmol7f">-&gt</button> <input type="range" min="0" class="svelte-lmol7f"/> <input type="number" min="0" class="svelte-lmol7f"/></nav>');function us(s,t){mt(t,!0);let o=Nt(t,"tMax",3,10),n=Nt(t,"tStep",3,.1),v=Nt(t,"tUpdate",3,500),c=Nt(t,"simTime",15,0),d=null,i=0,u;const k=4;function b(){d!==null&&(clearInterval(d),d=null)}function L(){u<0&&c()<=0?c(o()):u>0&&c()>=o()?c(0):c(c()+u)}function z(){const H=v()/2**(Math.abs(i)-1);u=i<0?-n():n(),d=setInterval(L,H)}function h(){b(),c(0),i=0}function f(){b(),i=0,u=-n(),L()}function R(){b(),i=0,u=n(),L()}function T(){b(),i=Math.max(i-1,-k),z()}function J(){b(),i=Math.min(i+1,k),z()}function A(){b(),i=0}kl(()=>{b()});var B=ds(),nt=l(B);nt.__click=h;var ot=a(nt,2);ot.__click=T;var ct=a(ot,2);ct.__click=f;var m=a(ct,2);m.__click=A;var U=a(m,2);U.__click=R;var V=a(U,2);V.__click=J;var q=a(V,2);at(q);var Q=a(q,2);at(Q),e(B),et(()=>{E(q,"max",o()),E(q,"step",n()),E(Q,"max",o()),E(Q,"step",n())}),Le(q,c),Le(Q,c),C(s,B),_t()}Ft(["click"]);var fs=M('<nav class="svelte-1x3tdwl"><button aria-labelledby="zoomInit" class="svelte-1x3tdwl"><div class="zero svelte-1x3tdwl"></div></button><button aria-labelledby="zoomIn" class="svelte-1x3tdwl"><div class="zoomin svelte-1x3tdwl"></div></button><button aria-labelledby="zoomOut" class="svelte-1x3tdwl"><div class="zoomout svelte-1x3tdwl"></div></button><button aria-labelledby="moveLeft" class="svelte-1x3tdwl"><div class="arrowleft svelte-1x3tdwl"></div></button><button aria-labelledby="moveRight" class="svelte-1x3tdwl"><div class="arrowright svelte-1x3tdwl"></div></button><button aria-labelledby="moveUp" class="svelte-1x3tdwl"><div class="arrowup svelte-1x3tdwl"></div></button><button aria-labelledby="moveDown" class="svelte-1x3tdwl"><div class="arrowdown svelte-1x3tdwl"></div></button></nav>');function bs(s,t){mt(t,!0);var o=fs(),n=l(o);n.__click=()=>t.zoomClick("zoomInit");var v=a(n);v.__click=()=>t.zoomClick("zoomIn");var c=a(v);c.__click=()=>t.zoomClick("zoomOut");var d=a(c);d.__click=()=>t.zoomClick("moveLeft");var i=a(d);i.__click=()=>t.zoomClick("moveRight");var u=a(i);u.__click=()=>t.zoomClick("moveUp");var k=a(u);k.__click=()=>t.zoomClick("moveDown"),e(o),C(s,o),_t()}Ft(["click"]);var W=zl(()=>w),ms=M('<div class="svelte-1bt48xy"><label class="svelte-1bt48xy"><input type="checkbox" class="svelte-1bt48xy"/>main part</label> <label class="svelte-1bt48xy"><input type="checkbox" class="svelte-1bt48xy"/>main skeleton</label> <label class="svelte-1bt48xy"><input type="checkbox" class="svelte-1bt48xy"/>second parts</label> <label class="svelte-1bt48xy"><input type="checkbox" class="svelte-1bt48xy"/>second skeletons</label> <label class="svelte-1bt48xy"><input type="checkbox" class="svelte-1bt48xy"/>dynamics</label> <label class="svelte-1bt48xy"><input type="checkbox" class="svelte-1bt48xy"/>ruler</label> <label class="svelte-1bt48xy"><input type="checkbox" class="svelte-1bt48xy"/>frame of reference</label> <label class="svelte-1bt48xy"><input type="checkbox" class="svelte-1bt48xy"/>points</label> <label class="svelte-1bt48xy"><input type="checkbox" class="svelte-1bt48xy"/>lines</label> <label class="svelte-1bt48xy"><input type="checkbox" class="svelte-1bt48xy"/>vectors</label></div>');function _s(s,t){mt(t,!1),Dl();var o=ms(),n=l(o),v=l(n);at(v),Dt(),e(n);var c=a(n,2),d=l(c);at(d),Dt(),e(c);var i=a(c,2),u=l(i);at(u),Dt(),e(i);var k=a(i,2),b=l(k);at(b),Dt(),e(k);var L=a(k,2),z=l(L);at(z),Dt(),e(L);var h=a(L,2),f=l(h);at(f),Dt(),e(h);var R=a(h,2),T=l(R);at(T),Dt(),e(R);var J=a(R,2),A=l(J);at(A),Dt(),e(J);var B=a(J,2),nt=l(B);at(nt),Dt(),e(B);var ot=a(B,2),ct=l(ot);at(ct),Dt(),e(ot),e(o),Lt(v,()=>W().dLayers.main,m=>W(W().dLayers.main=m)),Lt(d,()=>W().dLayers.mainB,m=>W(W().dLayers.mainB=m)),Lt(u,()=>W().dLayers.second,m=>W(W().dLayers.second=m)),Lt(b,()=>W().dLayers.secondB,m=>W(W().dLayers.secondB=m)),Lt(z,()=>W().dLayers.dynamics,m=>W(W().dLayers.dynamics=m)),Lt(f,()=>W().dLayers.ruler,m=>W(W().dLayers.ruler=m)),Lt(T,()=>W().dLayers.refframe,m=>W(W().dLayers.refframe=m)),Lt(A,()=>W().dLayers.points,m=>W(W().dLayers.points=m)),Lt(nt,()=>W().dLayers.lines,m=>W(W().dLayers.lines=m)),Lt(ct,()=>W().dLayers.vectors,m=>W(W().dLayers.vectors=m)),C(s,o),_t()}var gs=M('<section class="svelte-1tkbqyn"><!> <div class="rack svelte-1tkbqyn"><canvas class="full svelte-1tkbqyn"></canvas> <!></div> <div class="rack svelte-1tkbqyn"><canvas class="zoom svelte-1tkbqyn"></canvas> <!></div></section>');function ys(s,t){mt(t,!0);let o=Nt(t,"simTime",15,0);const n=400,v=1200;let c=Z(n),d,i,u;function k(_,S){if(d){const O=d.getContext("2d");O.clearRect(0,0,O.canvas.width,O.canvas.height);try{u=_.getAdjustFull(O.canvas.width,O.canvas.height),_.draw(O,u,S)}catch(Y){console.log(Y)}}}function b(_,S,O){if(i){const Y=i.getContext("2d");Y.clearRect(0,0,Y.canvas.width,Y.canvas.height);try{(S===void 0||S.init===0)&&(S=_.getAdjustZoom(Y.canvas.width,Y.canvas.height)),_.draw(Y,S,O)}catch(xt){console.log(xt)}}}function L(){const _=d.getContext("2d"),S=i.getContext("2d"),O=Math.min(Math.max(.4*r(c),n),v);_.canvas.width=O,_.canvas.height=O,S.canvas.width=O,S.canvas.height=O,w.canvasZWidth=O,w.zAdjust.init===0&&(w.zAdjust=t.pFig.getAdjustZoom(S.canvas.width,S.canvas.height))}function z(){L(),k(t.pFig,w.dLayers),b(t.pFig,w.zAdjust,w.dLayers)}function h(_,S,O){k(_,O),b(_,S,O)}wl(()=>{L()}),pa(()=>{h(t.pFig,w.zAdjust,w.dLayers)});function f(_){const S=i.getContext("2d");switch(_){case"zoomInit":w.zAdjust=t.pFig.getAdjustZoom(S.canvas.width,S.canvas.height);break;case"zoomIn":w.zAdjust=$e(.7,w.zAdjust);break;case"zoomOut":w.zAdjust=$e(1.3,w.zAdjust);break;case"moveLeft":w.zAdjust.xMin+=-.2*w.zAdjust.xyDiff;break;case"moveRight":w.zAdjust.xMin+=.2*w.zAdjust.xyDiff;break;case"moveUp":w.zAdjust.yMin+=.2*w.zAdjust.xyDiff;break;case"moveDown":w.zAdjust.yMin+=-.2*w.zAdjust.xyDiff;break;default:console.log(`ERR423: ${_} has no case!`)}b(t.pFig,w.zAdjust,w.dLayers)}const R=3e3,T=10,J=3;let A={timestamp:0,offsetX:0,offsetY:0};function B(_){_.button===0&&(A.timestamp=Date.now(),A.offsetX=_.offsetX,A.offsetY=_.offsetY)}function nt(_){if(_.button===0)if(Date.now()-A.timestamp<R){const S=Math.abs(A.offsetX-_.offsetX),O=Math.abs(A.offsetY-_.offsetY);if(S<T&&O<T){const[Y,xt]=re(_.offsetX,_.offsetY,u);w.zAdjust=vl(Y,xt,w.zAdjust),h(t.pFig,w.zAdjust,w.dLayers)}if(S>T&&O>T){const Y=S/O,xt=1/Y;if(Y<J&&xt<J){const[kt,Ut]=re(_.offsetX,_.offsetY,u),[It,Xt]=re(A.offsetX,A.offsetY,u),Ot=i.getContext("2d").canvas.width;w.zAdjust=dl(kt,Ut,It,Xt,Ot,Ot),h(t.pFig,w.zAdjust,w.dLayers)}}}else console.log(`Warn205: ignore ${_.offsetX} ${_.offsetY} because too slow`)}function ot(_){if(d){const S=d.getContext("2d");if(_.buttons===1){const O=_.offsetX-A.offsetX,Y=_.offsetY-A.offsetY;k(t.pFig,w.dLayers),S.beginPath(),S.rect(A.offsetX,A.offsetY,O,Y),S.strokeStyle=fa.mouse,S.stroke()}if(w.dLayers.ruler){const[O,Y]=re(_.offsetX,_.offsetY,u);S.clearRect(5,5,200,25),S.font="15px Arial",S.fillStyle=fa.ruler,S.fillText(`x: ${O.toFixed(4)} y: ${Y.toFixed(4)}`,5,20)}}}let ct,m,U;function V(_){if(_.button===0){const[S,O]=re(_.offsetX,_.offsetY,w.zAdjust);ct=S,m=O,U=ul(w.zAdjust)}}function q(_){if(_.buttons===1){const[S,O]=re(_.offsetX,_.offsetY,U);w.zAdjust=fl(ct,m,S,O,U),b(t.pFig,w.zAdjust,w.dLayers)}else if(w.dLayers.ruler&&i){const S=i.getContext("2d"),[O,Y]=re(_.offsetX,_.offsetY,w.zAdjust);S.clearRect(5,5,200,25),S.font="15px Arial",S.fillStyle=fa.ruler,S.fillText(`x: ${O.toFixed(4)} y: ${Y.toFixed(4)}`,5,20)}}function Q(_){_.preventDefault(),_.deltaY>0?w.zAdjust=$e(.7,w.zAdjust):w.zAdjust=$e(1.3,w.zAdjust),b(t.pFig,w.zAdjust,w.dLayers)}var H=gs();Na("resize",rl,z);var lt=l(H);_s(lt,{});var it=a(lt,2),K=l(it);E(K,"width",n),E(K,"height",n),K.__mousedown=B,K.__mouseup=nt,K.__mousemove=ot,aa(K,_=>d=_,()=>d);var dt=a(K,2);us(dt,{get tMax(){return t.pDefSim.tMax},get tStep(){return t.pDefSim.tStep},get tUpdate(){return t.pDefSim.tUpdate},get simTime(){return o()},set simTime(_){o(_)}}),e(it);var vt=a(it,2),ft=l(vt);E(ft,"width",n),E(ft,"height",n),ft.__mousedown=V,ft.__mousemove=q,aa(ft,_=>i=_,()=>i);var Mt=a(ft,2);bs(Mt,{zoomClick:f}),e(vt),e(H),jl("innerWidth",_=>x(c,_,!0)),Na("wheel",ft,Q),C(s,H),_t()}Ft(["mousedown","mouseup","mousemove"]);var hs=M("<tr><td> </td><td> </td><td> </td><td><i> </i></td><td><i> </i></td></tr>"),ps=M('<li class="svelte-1dxvon5"><input type="checkbox" class="toggle svelte-1dxvon5"/> <label class="label svelte-1dxvon5"><div class="arrow svelte-1dxvon5"></div> </label> <button class="svelte-1dxvon5"> </button> <button class="svelte-1dxvon5">Export parameters</button> <div class="nested svelte-1dxvon5"><article class="svelte-1dxvon5"> <strong> </strong> </article> <table class="svelte-1dxvon5"><thead class="svelte-1dxvon5"><tr><td>Num</td><td>Name</td><td>Value</td><td>Init</td><td>Set?</td></tr></thead><tbody class="svelte-1dxvon5"></tbody></table></div></li>'),xs=M('<section class="svelte-1dxvon5"><h2 class="svelte-1dxvon5">Sub-designs <span class="svelte-1dxvon5"> </span></h2> <ol class="svelte-1dxvon5"></ol></section>');function ks(s,t){mt(t,!0);const o=gt(()=>Object.keys(t.subD));async function n(h){const f=t.subD[h];Ya(f.partName,za(f.dparam),!0);const R=ml(`/${t.pLink[f.partName]}`);Ba(R)}function v(h){const f=t.subD[h].partName,R=t.subD[h].dparam,T=`sub-design parameters of ${f} from ${t.origPartName}`;ka(f,za(R),T)}function c(h){let f="[ ";return f+=`${De(ba(h[0]))}, `,f+=`${De(ba(h[1]))}, `,f+=`${De(ba(h[2]))} ]`,f}function d(h){let f="[ ";return f+=`${De(h[0])}, `,f+=`${De(h[1])}, `,f+=`${De(h[2])} ]`,f}function i(h){return h?"Yes":""}var u=xs(),k=l(u),b=a(l(k)),L=l(b);e(b),e(k);var z=a(k,2);Ct(z,20,()=>r(o),h=>h,(h,f)=>{var R=ps(),T=l(R);at(T),bl(T,!1);var J=a(T,2),A=a(l(J));e(J);var B=a(J,2);B.__click=()=>n(f);var nt=l(B);e(B);var ot=a(B,2);ot.__click=()=>v(f);var ct=a(ot,2),m=l(ct),U=l(m),V=a(U),q=l(V,!0);e(V);var Q=a(V);e(m);var H=a(m,2),lt=a(l(H));Ct(lt,22,()=>Object.keys(t.subD[f].dparam),it=>it,(it,K,dt)=>{var vt=hs();let ft;var Mt=l(vt),_=l(Mt,!0);e(Mt);var S=a(Mt),O=l(S,!0);e(S);var Y=a(S),xt=l(Y,!0);e(Y);var kt=a(Y),Ut=l(kt),It=l(Ut,!0);e(Ut),e(kt);var Xt=a(kt),Tt=l(Xt),Ot=l(Tt,!0);e(Tt),e(Xt),e(vt),et(Wt=>{ft=pt(vt,1,"svelte-1dxvon5",null,ft,{changed:t.subD[f].dparam[K].chg}),D(_,r(dt)+1),D(O,K),D(xt,t.subD[f].dparam[K].val),D(It,t.subD[f].dparam[K].init),D(Ot,Wt)},[()=>i(t.subD[f].dparam[K].chg)]),C(it,vt)}),e(lt),e(H),e(ct),e(R),et((it,K,dt)=>{E(T,"id",`cb_${f??""}`),E(J,"for",`cb_${f??""}`),D(A,` ${f??""}`),D(nt,`Go to ${t.pLink[t.subD[f].partName]??""}`),D(U,`${it??""} parameters of `),D(q,t.subD[f].partName),D(Q,` with orientation ${K??""} (degree) at position
						${dt??""} (mm)`)},[()=>Object.keys(t.subD[f].dparam).length,()=>c(t.subD[f].orientation),()=>d(t.subD[f].position)]),C(h,R)}),e(z),e(u),et(()=>D(L,`(Number of sub-instances: ${r(o).length??""})`)),C(s,u),_t()}Ft(["click"]);var ws=M("<button> </button>"),Ds=M('<tr class="svelte-bllybc"><td class="svelte-bllybc"> </td><td class="svelte-bllybc"> </td><td class="svelte-bllybc">2d- svg</td><td class="svelte-bllybc"><button class="svelte-bllybc">preview</button></td><td class="svelte-bllybc"><button class="svelte-bllybc">download</button></td></tr>'),Ls=M('<tr class="svelte-bllybc"><td class="svelte-bllybc"> </td><td class="svelte-bllybc"> </td><td class="svelte-bllybc">2d- dxf</td><td class="svelte-bllybc"><button class="svelte-bllybc">preview</button></td><td class="svelte-bllybc"><button class="svelte-bllybc">download</button></td></tr>'),Ss=M('<!> <section class="svelte-bllybc"><h2 class="svelte-bllybc">Log</h2> <textarea rows="5" cols="94" readonly="" wrap="soft"></textarea></section> <section class="svelte-bllybc"><h2 class="svelte-bllybc">2D Drawings : <!> <button>All faces merged</button></h2></section> <!> <section class="svelte-bllybc"><h2 class="svelte-bllybc">Export</h2> <table class="svelte-bllybc"><caption class="svelte-bllybc">Output files</caption><thead class="svelte-bllybc"><tr class="svelte-bllybc"><th class="svelte-bllybc">#</th><th class="svelte-bllybc">Filename</th><th class="svelte-bllybc">Type</th><th class="svelte-bllybc">Preview</th><th class="svelte-bllybc">Download</th></tr></thead><tbody class="svelte-bllybc"><tr class="svelte-bllybc"><td class="svelte-bllybc">1</td><td class="svelte-bllybc"> </td><td class="svelte-bllybc">0-params- pxJson</td><td class="svelte-bllybc"><button class="svelte-bllybc">preview</button></td><td class="svelte-bllybc"><button class="svelte-bllybc">download</button></td></tr><tr class="svelte-bllybc"><td class="svelte-bllybc">2</td><td class="svelte-bllybc"> </td><td class="svelte-bllybc">1-log- txtLog</td><td class="svelte-bllybc"><button class="svelte-bllybc">preview</button></td><td class="svelte-bllybc"><button class="svelte-bllybc">download</button></td></tr><!><tr class="svelte-bllybc"><td class="svelte-bllybc"> </td><td class="svelte-bllybc"> </td><td class="svelte-bllybc">2d- svg</td><td class="svelte-bllybc"><button class="svelte-bllybc">preview</button></td><td class="svelte-bllybc"><button class="svelte-bllybc">download</button></td></tr><!><tr class="svelte-bllybc"><td class="svelte-bllybc"> </td><td class="svelte-bllybc"> </td><td class="svelte-bllybc">2d- dxf</td><td class="svelte-bllybc"><button class="svelte-bllybc">preview</button></td><td class="svelte-bllybc"><button class="svelte-bllybc">download</button></td></tr><tr class="svelte-bllybc"><td class="svelte-bllybc"> </td><td class="svelte-bllybc"> </td><td class="svelte-bllybc">4-pax- paxJson</td><td class="svelte-bllybc"><button class="svelte-bllybc">preview</button></td><td class="svelte-bllybc"><button class="svelte-bllybc">download</button></td></tr><tr class="svelte-bllybc"><td class="svelte-bllybc"> </td><td class="svelte-bllybc"> </td><td class="svelte-bllybc">5-script- scad</td><td class="svelte-bllybc"><button class="svelte-bllybc">preview</button></td><td class="svelte-bllybc"><button class="svelte-bllybc">download</button></td></tr><tr class="svelte-bllybc"><td class="svelte-bllybc"> </td><td class="svelte-bllybc"> </td><td class="svelte-bllybc">5-script- jsCad</td><td class="svelte-bllybc"><button class="svelte-bllybc">preview</button></td><td class="svelte-bllybc"><button class="svelte-bllybc">download</button></td></tr><tr class="svelte-bllybc"><td class="svelte-bllybc"> </td><td class="svelte-bllybc"> </td><td class="svelte-bllybc">5-script- pyFreecad</td><td class="svelte-bllybc"><button class="svelte-bllybc">preview</button></td><td class="svelte-bllybc"><button class="svelte-bllybc">download</button></td></tr><tr class="svelte-bllybc"><td class="svelte-bllybc"> </td><td class="svelte-bllybc"> </td><td class="svelte-bllybc">6-zip- zip</td><td class="svelte-bllybc"></td><td class="svelte-bllybc"><button class="svelte-bllybc">download</button></td></tr></tbody></table> <dialog id="dBview" class="svelte-bllybc"><textarea readonly="" wrap="soft" class="svelte-bllybc"></textarea> <button class="bback svelte-bllybc">close - back - escape</button></dialog> <!></section>',1);function Ns(s,t){mt(t,!0);const o="ParametrixAll";function n(y){let F=!0;const P=/warn/i;return y.search(P)<0&&(F=!1),F}function v(y,F){let P=F;if(y.length===0)console.log("warn404: Drawing has an empty face list");else{const j=y.slice();j.push(o),j.includes(P)||(P=y[0])}return P}function c(y,F){let P;const j=Object.keys(y),tt=v(j,F);return j.includes(tt)?P=y[tt]:P=hl(y),P}let d=Z(0),i=Z(o);Ta(()=>{x(i,v(Object.keys(t.fgeom(0,G[t.pDef.partName]).fig),""),!0)});let u=gt(()=>t.fgeom(r(d),G[t.pDef.partName])),k=gt(()=>{const y=new Date().toLocaleTimeString();let F=`Geometry ${t.pDef.partName} computed at ${y}
`;return F+=r(u).logstr,F}),b=gt(()=>Object.keys(r(u).fig)),L=gt(()=>r(u).calcErr),z=gt(()=>n(r(u).logstr)),h=gt(()=>c(r(u).fig,r(i))),f=gt(()=>r(u).sub);function R(y,F){const P=document.createElement("a"),j=URL.createObjectURL(F);P.setAttribute("href",j),P.setAttribute("download",y),P.click(),P.remove(),URL.revokeObjectURL(j)}function T(y,F,P){const j=document.createElement("a"),tt="data:"+P+";utf-8,"+encodeURIComponent(F);j.setAttribute("href",tt),j.setAttribute("download",y),j.click(),j.remove()}function J(){const y=/[-:]/g,F=/\..*$/;return new Date().toISOString().replace(y,"").replace(F,"").replace("T","_")}async function A(y){const F=/^svg_/,P=/^dxf_/;let j=rt.eSVG,tt="all";y.match(F)?(j=rt.eSVG,tt=y.replace(F,"")):y.match(P)?(j=rt.eDXF,tt=y.replace(P,"")):y==="allsvg"?j=rt.eSVGALL:y==="alldxf"?j=rt.eDXFALL:y==="compute_log"?j=rt.eTXTLOG:y==="pax"?j=rt.ePAX:y==="oscad"?j=rt.eOPENSCAD:y==="ojscad"?j=rt.eJSCAD:y==="freecad"?j=rt.eFREECAD:y==="zip"?j=rt.eZIP:console.log(`err883: downloadExport iExportFace ${y} invalid`);const jt=gl(j),bt=pl(j),wt=yl(j),ht=t.pDef.partName+"_"+tt+"_"+J()+jt;if(wt){const zt=await _l(t.fgeom,r(d),G[t.pDef.partName],t.pDef,j);R(ht,zt)}else{const zt=Aa(t.fgeom,G[t.pDef.partName],t.pDef,tt,j);T(ht,zt,bt)}}async function B(){ka(t.pDef.partName,G[t.pDef.partName],"")}let nt,ot=Z("");function ct(y){x(ot,y,!0),nt.showModal()}function m(y,F){ct(Aa(t.fgeom,G[t.pDef.partName],t.pDef,y,F))}function U(){nt.close()}var V=Ss(),q=St(V);vs(q,{get pDef(){return t.pDef},get pFig(){return r(h)}});var Q=a(q,2),H=a(l(Q),2);ga(H);let lt;e(Q);var it=a(Q,2),K=l(it),dt=a(l(K));Ct(dt,16,()=>r(b),y=>y,(y,F)=>{var P=ws();P.__click=()=>{x(i,F,!0)};var j=l(P,!0);e(P),et(()=>{pt(P,1,Oa({theFace:r(i)===F}),"svelte-bllybc"),D(j,F)}),C(y,P)});var vt=a(dt,2);vt.__click=()=>{x(i,o)},e(K),e(it);var ft=a(it,2);ys(ft,{get pDefSim(){return t.pDef.sim},get pFig(){return r(h)},get simTime(){return r(d)},set simTime(y){x(d,y,!0)}});var Mt=a(ft,2),_=a(l(Mt),2),S=a(l(_),2),O=l(S),Y=a(l(O)),xt=l(Y);e(Y);var kt=a(Y,2),Ut=l(kt);Ut.__click=()=>{ct(Bl(t.pDef.partName,G[t.pDef.partName],""))},e(kt);var It=a(kt),Xt=l(It);Xt.__click=B,e(It),e(O);var Tt=a(O),Ot=a(l(Tt)),Wt=l(Ot);e(Ot);var ce=a(Ot,2),Se=l(ce);Se.__click=()=>{m("all",rt.eTXTLOG)},e(ce);var ie=a(ce),Re=l(ie);Re.__click=async()=>{await A("compute_log")},e(ie),e(Tt);var ve=a(Tt);Ct(ve,18,()=>r(b),y=>y,(y,F,P)=>{var j=Ds(),tt=l(j),jt=l(tt,!0);e(tt);var bt=a(tt),wt=l(bt);e(bt);var ht=a(bt,2),zt=l(ht);zt.__click=()=>{m(F,rt.eSVG)},e(ht);var ut=a(ht),At=l(ut);At.__click=async()=>{await A(`svg_${F}`)},e(ut),e(j),et(()=>{D(jt,3+r(P)),D(wt,`${t.pDef.partName??""}_${F??""}.svg`)}),C(y,j)});var de=a(ve),ue=l(de),la=l(ue,!0);e(ue);var fe=a(ue),Ue=l(fe);e(fe);var be=a(fe,2),Ie=l(be);Ie.__click=()=>{m("all",rt.eSVGALL)},e(be);var Xe=a(be),We=l(Xe);We.__click=async()=>{await A("allsvg")},e(Xe),e(de);var Ye=a(de);Ct(Ye,18,()=>r(b),y=>y,(y,F,P)=>{var j=Ls(),tt=l(j),jt=l(tt,!0);e(tt);var bt=a(tt),wt=l(bt);e(bt);var ht=a(bt,2),zt=l(ht);zt.__click=()=>{m(F,rt.eDXF)},e(ht);var ut=a(ht),At=l(ut);At.__click=async()=>{await A(`dxf_${F}`)},e(ut),e(j),et(()=>{D(jt,4+r(b).length+r(P)),D(wt,`${t.pDef.partName??""}_${F??""}.dxf`)}),C(y,j)});var Kt=a(Ye),Gt=l(Kt),qe=l(Gt,!0);e(Gt);var me=a(Gt),Ee=l(me);e(me);var _e=a(me,2),sa=l(_e);sa.__click=()=>{m("all",rt.eDXFALL)},e(_e);var Ne=a(_e),ge=l(Ne);ge.__click=async()=>{await A("alldxf")},e(Ne),e(Kt);var ye=a(Kt),Bt=l(ye),ra=l(Bt,!0);e(Bt);var he=a(Bt),na=l(he);e(he);var g=a(he,2),p=l(g);p.__click=()=>{m("all",rt.ePAX)},e(g);var N=a(g),I=l(N);I.__click=async()=>{await A("pax")},e(N),e(ye);var $=a(ye),st=l($),Rt=l(st,!0);e(st);var Yt=a(st),Pt=l(Yt);e(Yt);var Ht=a(Yt,2),Jt=l(Ht);Jt.__click=()=>{m("all",rt.eOPENSCAD)},e(Ht);var pe=a(Ht),yt=l(pe);yt.__click=async()=>{await A("oscad")},e(pe),e($);var Qt=a($),xe=l(Qt),$t=l(xe,!0);e(xe);var X=a(xe),oa=l(X);e(X);var qt=a(X,2),Ve=l(qt);Ve.__click=()=>{m("all",rt.eJSCAD)},e(qt);var ke=a(qt),ca=l(ke);ca.__click=async()=>{await A("ojscad")},e(ke),e(Qt);var te=a(Qt),ee=l(te),ia=l(ee,!0);e(ee);var ae=a(ee),va=l(ae);e(ae);var je=a(ae,2),da=l(je);da.__click=()=>{m("all",rt.eFREECAD)},e(je);var le=a(je),Ze=l(le);Ze.__click=async()=>{await A("freecad")},e(le),e(te);var Ke=a(te),Et=l(Ke),Ge=l(Et,!0);e(Et);var ze=a(Et),Ae=l(ze);e(ze);var Be=a(ze,3),Ce=l(Be);Ce.__click=async()=>{await A("zip")},e(Be),e(Ke),e(S),e(_);var we=a(_,2),se=l(we);ga(se);var He=a(se,2);He.__click=U,e(we),aa(we,y=>nt=y,()=>nt);var ua=a(we,2);ks(ua,{get subD(){return r(f)},get origPartName(){return t.pDef.partName},get pLink(){return t.pLink}}),e(Mt),et(()=>{ea(H,r(k)),lt=pt(H,1,"svelte-bllybc",null,lt,{colorErr:r(L),colorWarn:r(z)}),pt(vt,1,Oa({theFace:r(i)===o}),"svelte-bllybc"),D(xt,`px_${t.pDef.partName??""}.json`),D(Wt,`${t.pDef.partName??""}_all.log`),D(la,3+r(b).length),D(Ue,`${t.pDef.partName??""}_all.svg`),D(qe,4+2*r(b).length),D(Ee,`${t.pDef.partName??""}_all.dxf`),D(ra,5+2*r(b).length),D(na,`${t.pDef.partName??""}_all.pax.json`),D(Rt,6+2*r(b).length),D(Pt,`${t.pDef.partName??""}_all_noarc_openscad.scad`),D($t,7+2*r(b).length),D(oa,`${t.pDef.partName??""}_all_noarc_jscad.js`),D(ia,8+2*r(b).length),D(va,`${t.pDef.partName??""}_all_freecad.py`),D(Ge,9+2*r(b).length),D(Ae,`${t.pDef.partName??""}_all.zip`),ea(se,r(ot))}),C(s,V),_t()}Ft(["click"]);var js=M('<h1 class="svelte-ir2m1n"> </h1> <article class="svelte-ir2m1n"> </article> <!> <!>',1);function zs(s,t){mt(t,!0),Ol(t.pageDef);var o=js(),n=St(o),v=l(n,!0);e(n);var c=a(n,2),d=l(c);e(c);var i=a(c,2);Tl(i,{get pDef(){return t.pageDef.pDef}});var u=a(i,2);Ns(u,{get pDef(){return t.pageDef.pDef},get fgeom(){return t.pageDef.pGeom},get pLink(){return t.pLink}}),et(()=>{D(v,t.pageDef.pTitle),D(d,`[${t.pageDef.pDef.partName??""}]: ${t.pageDef.pDescription??""}`)}),C(s,o),_t()}function Ws(s,t){mt(t,!0),zs(s,{get pageDef(){return t.data.pageDef},get pLink(){return t.data.allLink}}),_t()}export{Ws as component,Xs as universal};
